# Google Drive deals to Iceberg job for tenant acme
tenant_id: acme
environment: prod

source_connector: gdrive_csv
source_connector_path: /app/connectors/gdrive_csv.yaml

target_connector: iceberg
target_connector_path: /app/connectors/iceberg.yaml

asset: gdrive_deals_daily
asset_path: /app/assets/gdrive_csv/v1.0/deals_daily.yaml

source:
  files:
    - file_id: 1a2B3cGDRIVEID
      object: deals_daily
  incremental:
    lookback_days: 0

target:
  branch: acme
  warehouse: s3://lake/acme/
  connection:
    nessie:
      uri: "http://nessie.acme.internal:19120/api/v1"
    s3:
      bucket: "acme-data-lake"
      prefix: "raw/gdrive/deals_daily"

logging:
  redaction: true
  level: INFO

# Infrastructure runtime (Azure Container Apps via Terraform)
infrastructure:
  provider: azure
  region: eastus
  runtime:
    type: azure_container_apps
  resource_identifiers:
    environment_name: "{{terraform_outputs.container_apps_environment}}"
    container_app_name: "{{terraform_outputs.container_app_name}}"
    endpoint_url: "{{terraform_outputs.ingress_url}}"
  tags:
    job_name: gdrive_deals_to_iceberg
    team: analytics_apps
    pipeline_type: ingestion
    environment: prod
    cost_center: FINOPS-ACME


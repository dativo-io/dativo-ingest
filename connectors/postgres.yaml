# PostgreSQL connector - supports both source and target roles
name: postgres
type: postgres
roles: [source, target]  # Can read and write from PostgreSQL
description: "PostgreSQL connector (bidirectional)"
default_engine:
  type: meltano
  options:
    meltano:
      tap: "tap-postgres"
      tap_package: "meltanolabs/tap-postgres"
      tap_version: "2.0.0"
      tap_config:
        replication_method: "INCREMENTAL"  # or "LOG_BASED" for CDC
        replication_slot: "dativo_slot"  # required for LOG_BASED
        publication: "dativo_pub"  # required for LOG_BASED
credentials:
  type: basic
  file_template: "/secrets/{tenant}/postgres.env"
connection_template:
  host: "${PGHOST}"
  port: "${PGPORT}"
  database: "${PGDATABASE}"
incremental:
  strategy: updated_at
  cursor_field_default: updated_at
  lookback_days_default: 1


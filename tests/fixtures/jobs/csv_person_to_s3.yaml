# CSV Person to S3 job for smoke tests
tenant_id: test_tenant
environment: test

# Source connector
source_connector: csv
source_connector_path: connectors/csv.yaml

# Target connector
target_connector: s3
target_connector_path: connectors/s3.yaml

# Asset definition
asset: csv_person
asset_path: tests/fixtures/assets/csv/v1.0/person.yaml

# Source configuration
source:
  files:
    - path: tests/fixtures/seeds/adventureworks/Person.csv
      object: Person

# Target configuration
target:
  connection:
    bucket: test-bucket
    prefix: raw/csv/person
    endpoint: "${S3_ENDPOINT}"
    access_key_id: "${AWS_ACCESS_KEY_ID}"
    secret_access_key: "${AWS_SECRET_ACCESS_KEY}"
    region: "${AWS_REGION}"

# Logging configuration
logging:
  redaction: false
  level: INFO

# Infrastructure runtime (externally managed)
infrastructure:
  provider: aws
  region: us-east-1
  runtime:
    type: aws_fargate
  resource_identifiers:
    cluster_name: "{{terraform_outputs.cluster_name}}"
    service_name: "{{terraform_outputs.service_name}}"
  tags:
    job_name: csv_person_to_s3
    team: data_platform
    pipeline_type: ingestion
    environment: test
    cost_center: FINOPS-TEST

